FROM node:18.9.0-slim

RUN mkdir -p /usr/src/app

WORKDIR /usr/src/app

#Add environmental variables
ARG SERVER
ARG DB
ARG PASSWORD
ARG USERNAME
ARG AUTH_JWT_SECRET
ARG RABBIT_MQ_URL

ENV SERVER $SERVER
ENV DB $DB
ENV PASSWORD $PASSWORD
ENV USERNAME $USERNAME
ENV AUTH_JWT_SECRET $AUTH_JWT_SECRET
ENV RABBIT_MQ_URL $RABBIT_MQ_URL

COPY package.json /usr/src/app

RUN npm install

COPY . /usr/src/app

EXPOSE 2000

CMD [ "npm", "start" ]